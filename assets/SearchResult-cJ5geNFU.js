import{k as K,u as N,l as X,m as Z,p as ee,q as le,s as te,x as b,y as f,z as e,A as se,B as ae,C as re,R as U,D as ie,E as oe,G as ue,H as ce,I as ne,J as w,K as M,L as he,M as me,N as ve,O as de,P as Ee,Q as Ie,S as ye,T as Se,U as D,V as pe,W as F}from"./app-D-TTs3Bk.js";const ge=["/","/FIT/","/General/Hall_of_Fame.html","/General/about.html","/General/alumni_share.html","/General/appreciate.html","/General/greenhand.html","/General/quickstart.html","/General/recurit.html","/MIS/","/Tech/Canvas.html","/Tech/CityU_Portal.html","/Tech/it_services.html","/elective/","/FIT/Core_Course/AC5511.html","/FIT/Core_Course/EF5042.html","/FIT/Core_Course/IS5540.html","/FIT/Core_Course/IS5542.html","/FIT/Core_Course/IS5740.html","/FIT/Core_Course/IS6400.html","/FIT/FIT_Elective/EF5052.html","/FIT/FIT_Elective/IS5010.html","/FIT/FIT_Elective/IS6941.html","/MIS/Core_Course/IS5311.html","/MIS/Core_Course/IS5312.html","/MIS/Core_Course/IS5313.html","/MIS/Core_Course/IS5411.html","/MIS/Core_Course/IS5413.html","/MIS/Core_Course/IS5540.html","/MIS/MIS_Elective/IS6335.html","/Useful/CourseEnroll/extension.html","/Useful/CourseEnroll/how_to.html","/Useful/CourseEnroll/pgce.html","/Useful/CourseEnroll/time_arrangement.html","/Useful/CourseEnroll/useful_data.html","/Useful/Learning/BIS_resource.html","/Useful/Learning/coding_greenhand.html","/Useful/Learning/cscse_reco.html","/Useful/Learning/trans_mse_tutorial.html","/elective/IS5/IS5238.html","/elective/IS5/IS5314.html","/elective/IS5/IS5743.html","/elective/IS5/IS5940.html","/elective/IS6/IS6200.html","/elective/IS6/IS6421.html","/elective/IS6/IS6423.html","/elective/IS6/IS6523.html","/elective/IS6/IS6620.html","/elective/IS6/IS6640.html","/elective/IS6/IS6912.html","/elective/IS6/IS6930.html","/elective/IS6/IS6940C.html","/404.html","/General/","/Tech/","/FIT/Core_Course/","/FIT/FIT_Elective/","/MIS/Core_Course/","/MIS/MIS_Elective/","/Useful/CourseEnroll/","/Useful/","/Useful/Learning/","/elective/IS5/","/elective/IS6/","/category/","/category/%E4%B8%93%E4%B8%9A%E6%96%B9%E5%90%91%E4%BB%8B%E7%BB%8D/","/category/%E8%AF%BE%E7%A8%8B%E7%9B%B8%E5%85%B3/","/tag/","/tag/%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81/","/tag/%E5%85%AC%E5%85%B1%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B/","/tag/fit%E5%BF%85%E4%BF%AE/","/tag/sema/","/tag/%E7%BD%91%E9%80%89/","/tag/semasemb/","/tag/semb/","/tag/fit%E8%AE%A1%E5%88%92%E5%86%85%E9%80%89%E4%BF%AE/","/tag/mis%E5%BF%85%E4%BF%AE/","/tag/mis%E8%AE%A1%E5%88%92%E5%86%85%E9%80%89%E4%BF%AE/","/tag/%E9%80%89%E8%AF%BE/","/tag/%E8%B5%84%E6%BA%90/","/tag/st%E8%AF%BE%E7%A8%8B/","/tag/%E9%9D%9E%E7%BD%91%E9%80%89/","/tag/not-offering-2025/","/tag/%E8%AE%BA%E6%96%87%E8%AF%BE%E7%A8%8B/","/article/","/star/","/timeline/"],Ce="SLIMSEARCH_QUERY_HISTORY",y=D(Ce,[]),fe=()=>{const{queryHistoryCount:a}=F;return{enabled:a>0,queryHistories:y,addQueryHistory:u=>{y.value=Array.from(new Set([u,...y.value.slice(0,a-1)]))},removeQueryHistory:u=>{y.value=[...y.value.slice(0,u),...y.value.slice(u+1)]}}},x=a=>ge[a.id]+("anchor"in a?`#${a.anchor}`:""),Fe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:q}=F,S=D(Fe,[]),_e=()=>({enabled:q>0,resultHistories:S,addResultHistory:o=>{{const u={link:x(o),display:o.display};"header"in o&&(u.header=o.header),S.value=[u,...S.value.slice(0,q-1)]}},removeResultHistory:o=>{S.value=[...S.value.slice(0,o),...S.value.slice(o+1)]}}),Be=a=>{const{page:o,routeLocale:u}=he(),_=me(),r=b(0),p=f(()=>r.value>0),h=ve([]);return de(()=>{const{search:B,terminate:d}=Ee(),g=ye(E=>{const{resultsFilter:A=s=>s,querySplitter:I,suggestionsFilter:L,...i}=_.value;E?(r.value+=1,B(E,u.value,i).then(s=>A(s,E,u.value,o.value)).then(s=>{r.value-=1,h.value=s}).catch(s=>{console.warn(s),r.value-=1,r.value||(h.value=[])})):h.value=[]},F.searchDelay-F.suggestDelay,{maxWait:5e3});Ie([a,u],([E])=>g(E.join(" "))),Se(()=>{d()})}),{isSearching:p,results:h}};var Te=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:o}){const u=N(),_=X(),r=Z(ee),{addQueryHistory:p,queryHistories:h,removeQueryHistory:B}=fe(),{resultHistories:d,addResultHistory:g,removeResultHistory:E}=_e(),A=le(a,"queries"),{results:I,isSearching:L}=Be(A),i=te({isQuery:!0,index:0}),s=b(0),m=b(0),Q=f(()=>h.value.length>0||d.value.length>0),T=f(()=>I.value.length>0),H=f(()=>I.value[s.value]||null),G=()=>{const{isQuery:l,index:t}=i;t===0?(i.isQuery=!l,i.index=l?d.value.length-1:h.value.length-1):i.index=t-1},$=()=>{const{isQuery:l,index:t}=i;t===(l?h.value.length-1:d.value.length-1)?(i.isQuery=!l,i.index=0):i.index=t+1},P=()=>{s.value=s.value>0?s.value-1:I.value.length-1,m.value=H.value.contents.length-1},j=()=>{s.value=s.value<I.value.length-1?s.value+1:0,m.value=0},O=()=>{m.value<H.value.contents.length-1?m.value+=1:j()},Y=()=>{m.value>0?m.value-=1:P()},k=l=>l.map(t=>pe(t)?t:e(t[0],t[1])),V=l=>{if(l.type==="customField"){const t=ce[l.index]||"$content",[v,c=""]=ne(t)?t[_.value].split("$content"):t.split("$content");return l.display.map(n=>e("div",k([v,...n,c])))}return l.display.map(t=>e("div",k(t)))},C=()=>{s.value=0,m.value=0,o("updateQuery",""),o("close")},W=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},h.value.map((l,t)=>{const v=i.isQuery&&i.index===t;return e("li",{class:["slimsearch-record-matches",{active:v}],role:"option","aria-selected":v,onClick:()=>{o("updateQuery",l)}},e("div",[e(w,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},l),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:M,onClick:c=>{c.preventDefault(),c.stopPropagation(),B(t)}})]))}))])),z=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((l,t)=>{const v=!i.isQuery&&i.index===t;return e("li",{class:["slimsearch-record-matches",{active:v}],role:"option","aria-selected":v},e(U,{to:l.link,onClick:()=>{C()}},()=>[e(w,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[l.header?e("div",{class:"slimsearch-record-content-header"},l.header):null,e("div",l.display.map(c=>k(c)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:M,onClick:c=>{c.preventDefault(),c.stopPropagation(),E(t)}})]))}))]));return se("keydown",l=>{if(a.isFocusing){if(T.value){if(l.key==="ArrowUp")Y();else if(l.key==="ArrowDown")O();else if(l.key==="Enter"){const t=H.value.contents[m.value];p(a.queries.join(" ")),g(t),u.push(x(t)),C()}}else if(l.key==="ArrowUp")G();else if(l.key==="ArrowDown")$();else if(l.key==="Enter"){const{index:t}=i;i.isQuery?(l.preventDefault(),o("updateQuery",h.value[t])):(u.push(d.value[t].link),C())}}}),ae([s,m],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!T.value:!Q.value}]},a.queries.length?L.value?e(re,{hint:r.value.searching}):T.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},I.value.map(({title:l,contents:t},v)=>{const c=s.value===v;return e("div",{class:["slimsearch-record",{active:c}],role:"group","aria-selected":c},[e("div",{class:"slimsearch-record-title"},l||r.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},t.map((n,J)=>{const R=c&&m.value===J;return e("li",{class:["slimsearch-record-matches",{active:R}],role:"option","aria-selected":R},e(U,{to:x(n),onClick:()=>{p(a.queries.join(" ")),g(n),C()}},()=>[n.type==="text"?null:e(n.type==="title"?ie:n.type==="heading"?oe:ue,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[n.type==="text"&&n.header?e("div",{class:"slimsearch-record-content-header"},n.header):null,e("div",V(n))])]))}))])})):r.value.emptyResult:Q.value?[W(),z()]:r.value.emptyHistory)}});export{Te as default};
