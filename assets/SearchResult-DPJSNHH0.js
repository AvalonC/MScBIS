import{u as P,g as Z,h as ee,i as $,j as te,k as le,t as ae,l as se,m as w,n as Q,p as re,q as O,s as l,v as q,x as L,R as G,y as ue,z as ie,A as oe,B as ne,C as ce,D as ve,E as he,F as me,O as Ee,G as pe,H as Ie,P as ye,I as de,J as Se,K as U}from"./app-CJF0_EXS.js";const ge=["/","/FIT/","/General/Hall_of_Fame.html","/General/about.html","/General/alumni_share.html","/General/appreciate.html","/General/changedata.html","/General/greenhand.html","/General/quickstart.html","/General/recurit.html","/MIS/","/Tech/Canvas.html","/Tech/CityU_Portal.html","/Tech/it_services.html","/elective/","/FIT/Core_Course/AC5511.html","/FIT/Core_Course/EF5042.html","/FIT/Core_Course/IS5540.html","/FIT/Core_Course/IS5740.html","/FIT/Core_Course/IS6400.html","/FIT/Core_Course/IS6523.html","/FIT/FIT_Elective/EF5052.html","/FIT/FIT_Elective/IS5010.html","/FIT/FIT_Elective/IS5238.html","/FIT/FIT_Elective/IS6941.html","/MIS/Core_Course/IS5311.html","/MIS/Core_Course/IS5312.html","/MIS/Core_Course/IS5313.html","/MIS/Core_Course/IS5411.html","/MIS/Core_Course/IS5413.html","/MIS/Core_Course/IS5540.html","/MIS/MIS_Elective/IS6335.html","/Useful/CourseEnroll/extension.html","/Useful/CourseEnroll/how_to.html","/Useful/CourseEnroll/time_arrangement.html","/Useful/CourseEnroll/useful_data.html","/Useful/Learning/BIS_resource.html","/Useful/Learning/trans_mse_tutorial.html","/elective/IS5/IS5314.html","/elective/IS5/IS5542.html","/elective/IS5/IS5743.html","/elective/IS5/IS5940.html","/elective/IS6/IS6200.html","/elective/IS6/IS6322.html","/elective/IS6/IS6421.html","/elective/IS6/IS6620.html","/elective/IS6/IS6640.html","/elective/IS6/IS6912.html","/elective/IS6/IS6921.html","/elective/IS6/IS6930.html","/elective/IS6/IS6940C.html","/404.html","/General/","/Tech/","/FIT/Core_Course/","/FIT/FIT_Elective/","/MIS/Core_Course/","/MIS/MIS_Elective/","/Useful/CourseEnroll/","/Useful/","/Useful/Learning/","/elective/IS5/","/elective/IS6/","/category/","/category/%E4%B8%93%E4%B8%9A%E6%96%B9%E5%90%91%E4%BB%8B%E7%BB%8D/","/category/%E8%AF%BE%E7%A8%8B%E7%9B%B8%E5%85%B3/","/tag/","/tag/%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81/","/tag/%E5%85%AC%E5%85%B1%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B/","/tag/fit%E5%BF%85%E4%BF%AE/","/tag/sema/","/tag/%E9%9D%9E%E7%BD%91%E9%80%89/","/tag/semasemb/","/tag/%E7%BD%91%E9%80%89/","/tag/semb/","/tag/fit%E8%AE%A1%E5%88%92%E5%86%85%E9%80%89%E4%BF%AE/","/tag/st%E8%AF%BE%E7%A8%8B/","/tag/mis%E5%BF%85%E4%BF%AE/","/tag/mis%E8%AE%A1%E5%88%92%E5%86%85%E9%80%89%E4%BF%AE/","/tag/%E9%80%89%E8%AF%BE/","/tag/%E8%B5%84%E6%BA%90/","/tag/unknown/","/tag/%E8%AE%BA%E6%96%87%E8%AF%BE%E7%A8%8B/","/article/","/star/","/timeline/"],Ce="SEARCH_PRO_QUERY_HISTORY",E=P(Ce,[]),fe=()=>{const{queryHistoryCount:a}=U,s=a>0;return{enabled:s,queryHistory:E,addQueryHistory:r=>{s&&(E.value.length<a?E.value=Array.from(new Set([r,...E.value])):E.value=Array.from(new Set([r,...E.value.slice(0,a-1)])))},removeQueryHistory:r=>{E.value=[...E.value.slice(0,r),...E.value.slice(r+1)]}}},M=a=>ge[a.id]+("anchor"in a?`#${a.anchor}`:""),Fe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:x}=U,p=P(Fe,[]),_e=()=>{const a=x>0;return{enabled:a,resultHistory:p,addResultHistory:s=>{if(a){const r={link:M(s),display:s.display};"header"in s&&(r.header=s.header),p.value.length<x?p.value=[r,...p.value]:p.value=[r,...p.value.slice(0,x-1)]}},removeResultHistory:s=>{p.value=[...p.value.slice(0,s),...p.value.slice(s+1)]}}},Ae=a=>{const s=ce(),r=$(),B=ve(),i=w(!1),y=he([]);return me(()=>{const{search:C,terminate:I}=Ee(),f=()=>{y.value=[],i.value=!1},d=Se(h=>{i.value=!0,h?C(h,r.value,s.value).then(m=>{var F,S;return((S=(F=s.value).searchFilter)==null?void 0:S.call(F,m,h,r.value,B.value))??m}).then(m=>{y.value=m,i.value=!1}).catch(m=>{console.error(m),f()}):f()},U.searchDelay);O([a,r],()=>d(a.value),{immediate:!0}),pe(()=>{I()})}),{searching:i,results:y}};var Te=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:s}){const r=ee(),B=$(),i=te(le),{enabled:y,addQueryHistory:C,queryHistory:I,removeQueryHistory:f}=fe(),{enabled:d,resultHistory:h,addResultHistory:m,removeResultHistory:F}=_e(),S=y||d,T=ae(a,"query"),{results:g,searching:j}=Ae(T),u=se({isQuery:!0,index:0}),c=w(0),v=w(0),D=Q(()=>S&&(I.value.length>0||h.value.length>0)),H=Q(()=>g.value.length>0),R=Q(()=>g.value[c.value]||null),Y=()=>{const{isQuery:e,index:t}=u;t===0?(u.isQuery=!e,u.index=e?h.value.length-1:I.value.length-1):u.index=t-1},z=()=>{const{isQuery:e,index:t}=u;t===(e?I.value.length-1:h.value.length-1)?(u.isQuery=!e,u.index=0):u.index=t+1},J=()=>{c.value=c.value>0?c.value-1:g.value.length-1,v.value=R.value.contents.length-1},K=()=>{c.value=c.value<g.value.length-1?c.value+1:0,v.value=0},V=()=>{v.value<R.value.contents.length-1?v.value+=1:K()},N=()=>{v.value>0?v.value-=1:J()},k=e=>e.map(t=>Ie(t)?t:l(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ye[e.index]||"$content",[o,A=""]=de(t)?t[B.value].split("$content"):t.split("$content");return e.display.map(n=>l("div",k([o,...n,A])))}return e.display.map(t=>l("div",k(t)))},_=()=>{c.value=0,v.value=0,s("updateQuery",""),s("close")};return re("keydown",e=>{if(a.isFocusing){if(H.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=R.value.contents[v.value];C(a.query),m(t),r.push(M(t)),_()}}else if(d){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:t}=u;u.isQuery?(s("updateQuery",I.value[t]),e.preventDefault()):(r.push(h.value[t].link),_())}}}}),O([c,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:T.value?!H.value:!D.value}],id:"search-pro-results"},T.value===""?S?D.value?[y?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},i.value.queryHistory),I.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:u.isQuery&&u.index===t}],onClick:()=>{s("updateQuery",e)}},[l(q,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:L,onClick:o=>{o.preventDefault(),o.stopPropagation(),f(t)}})]))])):null,d?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},i.value.resultHistory),h.value.map((e,t)=>l(G,{to:e.link,class:["search-pro-result-item",{active:!u.isQuery&&u.index===t}],onClick:()=>{_()}},()=>[l(q,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(o=>k(o)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:L,onClick:o=>{o.preventDefault(),o.stopPropagation(),F(t)}})]))])):null]:i.value.emptyHistory:i.value.emptyResult:j.value?l(ue,{hint:i.value.searching}):H.value?l("ul",{class:"search-pro-result-list"},g.value.map(({title:e,contents:t},o)=>{const A=c.value===o;return l("li",{class:["search-pro-result-list-item",{active:A}]},[l("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),t.map((n,X)=>{const b=A&&v.value===X;return l(G,{to:M(n),class:["search-pro-result-item",{active:b,"aria-selected":b}],onClick:()=>{C(a.query),m(n),_()}},()=>[n.type==="text"?null:l(n.type==="title"?ie:n.type==="heading"?oe:ne,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?l("div",{class:"content-header"},n.header):null,l("div",W(n))])])})])})):i.value.emptyResult)}});export{Te as default};
