import{g as N,u as X,h as b,i as Z,y as ee,t as le,j as te,k as R,l as f,m as t,n as se,p as ae,s as re,R as M,q as ie,v as ue,x as ne,z as oe,A as ce,B as U,C as Q,P as me,D as he,E as ve,F as Ee,G as Ie,H as de,I as ye,J as Se,K as G,L as ge,M as F}from"./app-DLEusqV6.js";const pe=["/","/FIT/","/General/Hall_of_Fame.html","/General/about.html","/General/alumni_share.html","/General/appreciate.html","/General/greenhand.html","/General/quickstart.html","/General/recurit.html","/MIS/","/Tech/Canvas.html","/Tech/CityU_Portal.html","/Tech/it_services.html","/elective/","/FIT/Core_Course/AC5511.html","/FIT/Core_Course/EF5042.html","/FIT/Core_Course/IS5540.html","/FIT/Core_Course/IS5740.html","/FIT/Core_Course/IS6400.html","/FIT/Core_Course/IS6523.html","/FIT/FIT_Elective/EF5052.html","/FIT/FIT_Elective/IS5010.html","/FIT/FIT_Elective/IS6941.html","/MIS/Core_Course/IS5311.html","/MIS/Core_Course/IS5312.html","/MIS/Core_Course/IS5313.html","/MIS/Core_Course/IS5411.html","/MIS/Core_Course/IS5413.html","/MIS/Core_Course/IS5540.html","/MIS/MIS_Elective/IS6335.html","/Useful/CourseEnroll/extension.html","/Useful/CourseEnroll/how_to.html","/Useful/CourseEnroll/pgce.html","/Useful/CourseEnroll/time_arrangement.html","/Useful/CourseEnroll/useful_data.html","/Useful/Learning/BIS_resource.html","/Useful/Learning/coding_greenhand.html","/Useful/Learning/cscse_reco.html","/Useful/Learning/trans_mse_tutorial.html","/elective/IS5/IS5238.html","/elective/IS5/IS5314.html","/elective/IS5/IS5542.html","/elective/IS5/IS5743.html","/elective/IS5/IS5940.html","/elective/IS6/IS6200.html","/elective/IS6/IS6421.html","/elective/IS6/IS6423.html","/elective/IS6/IS6620.html","/elective/IS6/IS6640.html","/elective/IS6/IS6912.html","/elective/IS6/IS6930.html","/elective/IS6/IS6940C.html","/404.html","/General/","/Tech/","/FIT/Core_Course/","/FIT/FIT_Elective/","/MIS/Core_Course/","/MIS/MIS_Elective/","/Useful/CourseEnroll/","/Useful/","/Useful/Learning/","/elective/IS5/","/elective/IS6/","/category/","/category/%E4%B8%93%E4%B8%9A%E6%96%B9%E5%90%91%E4%BB%8B%E7%BB%8D/","/category/%E8%AF%BE%E7%A8%8B%E7%9B%B8%E5%85%B3/","/tag/","/tag/%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81/","/tag/%E5%85%AC%E5%85%B1%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B/","/tag/fit%E5%BF%85%E4%BF%AE/","/tag/sema/","/tag/%E9%9D%9E%E7%BD%91%E9%80%89/","/tag/semasemb/","/tag/%E7%BD%91%E9%80%89/","/tag/semb/","/tag/fit%E8%AE%A1%E5%88%92%E5%86%85%E9%80%89%E4%BF%AE/","/tag/mis%E5%BF%85%E4%BF%AE/","/tag/mis%E8%AE%A1%E5%88%92%E5%86%85%E9%80%89%E4%BF%AE/","/tag/%E9%80%89%E8%AF%BE/","/tag/%E8%B5%84%E6%BA%90/","/tag/st%E8%AF%BE%E7%A8%8B/","/tag/unknown/","/tag/%E8%AE%BA%E6%96%87%E8%AF%BE%E7%A8%8B/","/article/","/star/","/timeline/"],Ce="SLIMSEARCH_QUERY_HISTORY",d=G(Ce,[]),fe=()=>{const{queryHistoryCount:a}=F;return{enabled:a>0,queryHistories:d,addQueryHistory:u=>{d.value=Array.from(new Set([u,...d.value.slice(0,a-1)]))},removeQueryHistory:u=>{d.value=[...d.value.slice(0,u),...d.value.slice(u+1)]}}},q=a=>pe[a.id]+("anchor"in a?`#${a.anchor}`:""),Fe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:D}=F,y=G(Fe,[]),_e=()=>({enabled:D>0,resultHistories:y,addResultHistory:i=>{{const u={link:q(i),display:i.display};"header"in i&&(u.header=i.header),y.value=[u,...y.value.slice(0,D-1)]}},removeResultHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}),Be=a=>{const i=me(),u=b(),_=he(),n=R(0),S=f(()=>n.value>0),m=ve([]);return Ee(()=>{const{search:B,terminate:v}=Ie(),g=ye(E=>{const{resultsFilter:A=s=>s,querySplitter:I,suggestionsFilter:w,...r}=i.value;E?(n.value+=1,B(E,u.value,r).then(s=>A(s,E,u.value,_.value)).then(s=>{n.value-=1,m.value=s}).catch(s=>{console.warn(s),n.value-=1,n.value||(m.value=[])})):m.value=[]},F.searchDelay-F.suggestDelay,{maxWait:5e3});de([a,u],([E])=>g(E.join(" "))),Se(()=>{v()})}),{isSearching:S,results:m}};var Te=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:i}){const u=X(),_=b(),n=Z(ee),{addQueryHistory:S,queryHistories:m,removeQueryHistory:B}=fe(),{resultHistories:v,addResultHistory:g,removeResultHistory:E}=_e(),A=le(a,"queries"),{results:I,isSearching:w}=Be(A),r=te({isQuery:!0,index:0}),s=R(0),h=R(0),x=f(()=>m.value.length>0||v.value.length>0),T=f(()=>I.value.length>0),H=f(()=>I.value[s.value]||null),$=()=>{const{isQuery:e,index:l}=r;l===0?(r.isQuery=!e,r.index=e?v.value.length-1:m.value.length-1):r.index=l-1},j=()=>{const{isQuery:e,index:l}=r;l===(e?m.value.length-1:v.value.length-1)?(r.isQuery=!e,r.index=0):r.index=l+1},P=()=>{s.value=s.value>0?s.value-1:I.value.length-1,h.value=H.value.contents.length-1},O=()=>{s.value=s.value<I.value.length-1?s.value+1:0,h.value=0},Y=()=>{h.value<H.value.contents.length-1?h.value+=1:O()},z=()=>{h.value>0?h.value-=1:P()},k=e=>e.map(l=>ge(l)?l:t(l[0],l[1])),J=e=>{if(e.type==="customField"){const l=oe[e.index]||"$content",[o,C=""]=ce(l)?l[_.value].split("$content"):l.split("$content");return e.display.map(c=>t("div",k([o,...c,C])))}return e.display.map(l=>t("div",k(l)))},p=()=>{s.value=0,h.value=0,i("updateQuery",""),i("close")},K=()=>t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},n.value.queryHistory),m.value.map((e,l)=>t("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===l}],onClick:()=>{i("updateQuery",e)}},[t(U,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},e),t("button",{class:"slimsearch-remove-icon",innerHTML:Q,onClick:o=>{o.preventDefault(),o.stopPropagation(),B(l)}})]))])),V=()=>t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},n.value.resultHistory),v.value.map((e,l)=>t(M,{to:e.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===l}],onClick:()=>{p()}},()=>[t(U,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(o=>k(o)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:Q,onClick:o=>{o.preventDefault(),o.stopPropagation(),E(l)}})]))]));return se("keydown",e=>{if(a.isFocusing){if(T.value){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const l=H.value.contents[h.value];S(a.queries.join(" ")),g(l),u.push(q(l)),p()}}else if(e.key==="ArrowUp")$();else if(e.key==="ArrowDown")j();else if(e.key==="Enter"){const{index:l}=r;r.isQuery?(i("updateQuery",m.value[l]),e.preventDefault()):(u.push(v.value[l].link),p())}}}),ae([s,h],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:a.queries.length?!T.value:!x.value}],id:"slimsearch-results"},a.queries.length?w.value?t(re,{hint:n.value.searching}):T.value?t("ul",{class:"slimsearch-result-list"},I.value.map(({title:e,contents:l},o)=>{const C=s.value===o;return t("li",{class:["slimsearch-result-list-item",{active:C}]},[t("div",{class:"slimsearch-result-title"},e||n.value.defaultTitle),l.map((c,W)=>{const L=C&&h.value===W;return t(M,{to:q(c),class:["slimsearch-result-item",{active:L,"aria-selected":L}],onClick:()=>{S(a.queries.join(" ")),g(c),p()}},()=>[c.type==="text"?null:t(c.type==="title"?ie:c.type==="heading"?ue:ne,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[c.type==="text"&&c.header?t("div",{class:"content-header"},c.header):null,t("div",J(c))])])})])})):n.value.emptyResult:x.value?[K(),V()]:n.value.emptyHistory)}});export{Te as default};
